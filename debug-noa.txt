
> dp-soda@1.0.0 debug-noaa
> node scripts/debug-noaa-api.mjs

üå™Ô∏è  NOAA WEATHER API INVESTIGATION FOR MKI SYSTEM
======================================================================
Purpose: Determine if NOAA can provide advanced meteorological data
         for legitimate 6-factor Mountain Wave-Katabatic Interaction analysis

üìç STEP 1: Getting NOAA grid points for both locations
==================================================
üéØ Testing NOAA Grid Point API for Morrison, CO (Valley - 1740m)
------------------------------------------------------------
üì° API Request:
   URL: https://api.weather.gov/points/39.6547,-105.1956
‚úÖ Response Status: 200
üìä Grid Point Data:
{
  "@context": [
    "https://geojson.org/geojson-ld/geojson-context.jsonld",
    {
      "@version": "1.1",
      "wx": "https://api.weather.gov/ontology#",
      "s": "https://schema.org/",
      "geo": "http://www.opengis.net/ont/geosparql#",
      "unit": "http://codes.wmo.int/common/unit/",
      "@vocab": "https://api.weather.gov/ontology#",
      "geometry": {
        "@id": "s:GeoCoordinates",
        "@type": "geo:wktLiteral"
      },
      "city": "s:addressLocality",
      "state": "s:addressRegion",
      "distance": {
        "@id": "s:Distance",
        "@type": "s:QuantitativeValue"
      },
      "bearing": {
        "@type": "s:QuantitativeValue"
      },
      "value": {
        "@id": "s:value"
      },
      "unitCode": {
        "@id": "s:unitCode",
        "@type": "@id"
      },
      "forecastOffice": {
        "@type": "@id"
      },
      "forecastGridData": {
        "@type": "@id"
      },
      "publicZone": {
        "@type": "@id"
      },
      "county": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://api.weather.gov/points/39.6547,-105.1956",
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [
      -105.1956,
      39.6547
    ]
  },
  "properties": {
    "@id": "https://api.weather.gov/points/39.6547,-105.1956",
    "@type": "wx:Point",
    "cwa": "BOU",
    "forecastOffice": "https://api.weather.gov/offices/BOU",
    "gridId": "BOU",
    "gridX": 56,
    "gridY": 58,
    "forecast": "https://api.weather.gov/gridpoints/BOU/56,58/forecast",
    "forecastHourly": "https://api.weather.gov/gridpoints/BOU/56,58/forecast/hourly",
    "forecastGridData": "https://api.weather.gov/gridpoints/BOU/56,58",
    "observationStations": "https://api.weather.gov/gridpoints/BOU/56,58/stations",
    "relativeLocation": {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          -105.207919,
          39.625613
        ]
      },
      "properties": {
        "city": "Morrison",
        "state": "CO",
        "distance": {
          "unitCode": "wmoUnit:m",
          "value": 3401.9994330297
        },
        "bearing": {
          "unitCode": "wmoUnit:degree_(angle)",
          "value": 18
        }
      }
    },
    "forecastZone": "https://api.weather.gov/zones/forecast/COZ036",
    "county": "https://api.weather.gov/zones/county/COC059",
    "fireWeatherZone": "https://api.weather.gov/zones/fire/COZ216",
    "timeZone": "America/Denver",
    "radarStation": "KFTG"
  }
}

üè∑Ô∏è  GRID INFORMATION:
   Office: BOU
   Grid X: 56
   Grid Y: 58
   Forecast URL: https://api.weather.gov/gridpoints/BOU/56,58/forecast
   Hourly Forecast URL: https://api.weather.gov/gridpoints/BOU/56,58/forecast/hourly
   Forecast Grid Data URL: https://api.weather.gov/gridpoints/BOU/56,58
üéØ Testing NOAA Grid Point API for Nederland, CO (Mountain - 2540m)
------------------------------------------------------------
üì° API Request:
   URL: https://api.weather.gov/points/40.0142,-105.5108
‚úÖ Response Status: 200
üìä Grid Point Data:
{
  "@context": [
    "https://geojson.org/geojson-ld/geojson-context.jsonld",
    {
      "@version": "1.1",
      "wx": "https://api.weather.gov/ontology#",
      "s": "https://schema.org/",
      "geo": "http://www.opengis.net/ont/geosparql#",
      "unit": "http://codes.wmo.int/common/unit/",
      "@vocab": "https://api.weather.gov/ontology#",
      "geometry": {
        "@id": "s:GeoCoordinates",
        "@type": "geo:wktLiteral"
      },
      "city": "s:addressLocality",
      "state": "s:addressRegion",
      "distance": {
        "@id": "s:Distance",
        "@type": "s:QuantitativeValue"
      },
      "bearing": {
        "@type": "s:QuantitativeValue"
      },
      "value": {
        "@id": "s:value"
      },
      "unitCode": {
        "@id": "s:unitCode",
        "@type": "@id"
      },
      "forecastOffice": {
        "@type": "@id"
      },
      "forecastGridData": {
        "@type": "@id"
      },
      "publicZone": {
        "@type": "@id"
      },
      "county": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://api.weather.gov/points/40.0142,-105.5108",
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [
      -105.5108,
      40.0142
    ]
  },
  "properties": {
    "@id": "https://api.weather.gov/points/40.0142,-105.5108",
    "@type": "wx:Point",
    "cwa": "BOU",
    "forecastOffice": "https://api.weather.gov/offices/BOU",
    "gridId": "BOU",
    "gridX": 46,
    "gridY": 75,
    "forecast": "https://api.weather.gov/gridpoints/BOU/46,75/forecast",
    "forecastHourly": "https://api.weather.gov/gridpoints/BOU/46,75/forecast/hourly",
    "forecastGridData": "https://api.weather.gov/gridpoints/BOU/46,75",
    "observationStations": "https://api.weather.gov/gridpoints/BOU/46,75/stations",
    "relativeLocation": {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          -105.479577,
          39.97689
        ]
      },
      "properties": {
        "city": "Bonanza Mountain Estates",
        "state": "CO",
        "distance": {
          "unitCode": "wmoUnit:m",
          "value": 4928.0768438327
        },
        "bearing": {
          "unitCode": "wmoUnit:degree_(angle)",
          "value": 327
        }
      }
    },
    "forecastZone": "https://api.weather.gov/zones/forecast/COZ035",
    "county": "https://api.weather.gov/zones/county/COC013",
    "fireWeatherZone": "https://api.weather.gov/zones/fire/COZ215",
    "timeZone": "America/Denver",
    "radarStation": "KFTG"
  }
}

üè∑Ô∏è  GRID INFORMATION:
   Office: BOU
   Grid X: 46
   Grid Y: 75
   Forecast URL: https://api.weather.gov/gridpoints/BOU/46,75/forecast
   Hourly Forecast URL: https://api.weather.gov/gridpoints/BOU/46,75/forecast/hourly
   Forecast Grid Data URL: https://api.weather.gov/gridpoints/BOU/46,75

üìä STEP 2: Analyzing detailed grid data
==================================================

üå°Ô∏è  Testing NOAA Grid Data API for Morrison, CO (Valley - 1740m)
------------------------------------------------------------
‚úÖ Response Status: 200
üìä Available Grid Data Parameters:
   ‚Ä¢ @id: string
   ‚Ä¢ @type: string
   ‚Ä¢ updateTime: string
   ‚Ä¢ validTimes: string
   ‚úÖ elevation: Available
   ‚Ä¢ forecastOffice: string
   ‚Ä¢ gridId: string
   ‚Ä¢ gridX: number
   ‚Ä¢ gridY: number
   ‚úÖ temperature: Available
      Sample: 17.77777777777778 wmoUnit:degC
   ‚úÖ dewpoint: Available
   ‚úÖ maxTemperature: Available
   ‚úÖ minTemperature: Available
   ‚úÖ relativeHumidity: Available
      Sample: 46 wmoUnit:percent
   ‚úÖ apparentTemperature: Available
   ‚úÖ wetBulbGlobeTemperature: Available
   ‚úÖ heatIndex: Available
   ‚úÖ windChill: Available
   ‚úÖ skyCover: Available
   ‚úÖ windDirection: Available
      Sample: 260 wmoUnit:degree_(angle)
   ‚úÖ windSpeed: Available
      Sample: 14.816 wmoUnit:km_h-1
   ‚úÖ windGust: Available
   ‚úÖ weather: Available
   ‚úÖ hazards: Available
   ‚úÖ probabilityOfPrecipitation: Available
   ‚úÖ quantitativePrecipitation: Available
   ‚úÖ iceAccumulation: Available
   ‚úÖ snowfallAmount: Available
   ‚úÖ snowLevel: Available
   ‚úÖ ceilingHeight: Available
   ‚úÖ visibility: Available
   ‚úÖ transportWindSpeed: Available
   ‚úÖ transportWindDirection: Available
   ‚úÖ mixingHeight: Available
   ‚úÖ hainesIndex: Available
   ‚úÖ lightningActivityLevel: Available
   ‚úÖ twentyFootWindSpeed: Available
   ‚úÖ twentyFootWindDirection: Available
   ‚úÖ waveHeight: Available
   ‚úÖ wavePeriod: Available
   ‚úÖ waveDirection: Available
   ‚úÖ primarySwellHeight: Available
   ‚úÖ primarySwellDirection: Available
   ‚úÖ secondarySwellHeight: Available
   ‚úÖ secondarySwellDirection: Available
   ‚úÖ wavePeriod2: Available
   ‚úÖ windWaveHeight: Available
   ‚úÖ dispersionIndex: Available
   ‚úÖ pressure: Available
   ‚úÖ probabilityOfTropicalStormWinds: Available
   ‚úÖ probabilityOfHurricaneWinds: Available
   ‚úÖ potentialOf15mphWinds: Available
   ‚úÖ potentialOf25mphWinds: Available
   ‚úÖ potentialOf35mphWinds: Available
   ‚úÖ potentialOf45mphWinds: Available
   ‚úÖ potentialOf20mphWindGusts: Available
   ‚úÖ potentialOf30mphWindGusts: Available
   ‚úÖ potentialOf40mphWindGusts: Available
   ‚úÖ potentialOf50mphWindGusts: Available
   ‚úÖ potentialOf60mphWindGusts: Available
   ‚úÖ grasslandFireDangerIndex: Available
   ‚úÖ probabilityOfThunder: Available
   ‚úÖ davisStabilityIndex: Available
   ‚úÖ atmosphericDispersionIndex: Available
   ‚úÖ lowVisibilityOccurrenceRiskIndex: Available
   ‚úÖ stability: Available
   ‚úÖ redFlagThreatIndex: Available

üéØ MKI-RELEVANT PARAMETERS:
------------------------------
   ‚úÖ temperature: Temperature profiles
   ‚úÖ windSpeed: Wind speed at surface
   ‚úÖ windDirection: Wind direction
   ‚úÖ pressure: Atmospheric pressure
   ‚úÖ relativeHumidity: Humidity
   ‚úÖ dewpoint: Dew point temperature
   ‚úÖ skyCover: Sky cover/cloud cover
   ‚ùå precipitationProbability: Precipitation probability - NOT AVAILABLE
   ‚úÖ atmosphericDispersionIndex: Atmospheric stability indicator
   ‚úÖ mixingHeight: Mixing layer height
   ‚úÖ transportWindSpeed: Transport wind speed
   ‚úÖ transportWindDirection: Transport wind direction
   ‚ùå ventilationRate: Ventilation rate - NOT AVAILABLE

üå°Ô∏è  Testing NOAA Grid Data API for Nederland, CO (Mountain - 2540m)
------------------------------------------------------------
‚úÖ Response Status: 200
üìä Available Grid Data Parameters:
   ‚Ä¢ @id: string
   ‚Ä¢ @type: string
   ‚Ä¢ updateTime: string
   ‚Ä¢ validTimes: string
   ‚úÖ elevation: Available
   ‚Ä¢ forecastOffice: string
   ‚Ä¢ gridId: string
   ‚Ä¢ gridX: number
   ‚Ä¢ gridY: number
   ‚úÖ temperature: Available
      Sample: 11.666666666666666 wmoUnit:degC
   ‚úÖ dewpoint: Available
   ‚úÖ maxTemperature: Available
   ‚úÖ minTemperature: Available
   ‚úÖ relativeHumidity: Available
      Sample: 50 wmoUnit:percent
   ‚úÖ apparentTemperature: Available
   ‚úÖ wetBulbGlobeTemperature: Available
   ‚úÖ heatIndex: Available
   ‚úÖ windChill: Available
   ‚úÖ skyCover: Available
   ‚úÖ windDirection: Available
      Sample: 270 wmoUnit:degree_(angle)
   ‚úÖ windSpeed: Available
      Sample: 16.668 wmoUnit:km_h-1
   ‚úÖ windGust: Available
   ‚úÖ weather: Available
   ‚úÖ hazards: Available
   ‚úÖ probabilityOfPrecipitation: Available
   ‚úÖ quantitativePrecipitation: Available
   ‚úÖ iceAccumulation: Available
   ‚úÖ snowfallAmount: Available
   ‚úÖ snowLevel: Available
   ‚úÖ ceilingHeight: Available
   ‚úÖ visibility: Available
   ‚úÖ transportWindSpeed: Available
   ‚úÖ transportWindDirection: Available
   ‚úÖ mixingHeight: Available
   ‚úÖ hainesIndex: Available
   ‚úÖ lightningActivityLevel: Available
   ‚úÖ twentyFootWindSpeed: Available
   ‚úÖ twentyFootWindDirection: Available
   ‚úÖ waveHeight: Available
   ‚úÖ wavePeriod: Available
   ‚úÖ waveDirection: Available
   ‚úÖ primarySwellHeight: Available
   ‚úÖ primarySwellDirection: Available
   ‚úÖ secondarySwellHeight: Available
   ‚úÖ secondarySwellDirection: Available
   ‚úÖ wavePeriod2: Available
   ‚úÖ windWaveHeight: Available
   ‚úÖ dispersionIndex: Available
   ‚úÖ pressure: Available
   ‚úÖ probabilityOfTropicalStormWinds: Available
   ‚úÖ probabilityOfHurricaneWinds: Available
   ‚úÖ potentialOf15mphWinds: Available
   ‚úÖ potentialOf25mphWinds: Available
   ‚úÖ potentialOf35mphWinds: Available
   ‚úÖ potentialOf45mphWinds: Available
   ‚úÖ potentialOf20mphWindGusts: Available
   ‚úÖ potentialOf30mphWindGusts: Available
   ‚úÖ potentialOf40mphWindGusts: Available
   ‚úÖ potentialOf50mphWindGusts: Available
   ‚úÖ potentialOf60mphWindGusts: Available
   ‚úÖ grasslandFireDangerIndex: Available
   ‚úÖ probabilityOfThunder: Available
   ‚úÖ davisStabilityIndex: Available
   ‚úÖ atmosphericDispersionIndex: Available
   ‚úÖ lowVisibilityOccurrenceRiskIndex: Available
   ‚úÖ stability: Available
   ‚úÖ redFlagThreatIndex: Available

üéØ MKI-RELEVANT PARAMETERS:
------------------------------
   ‚úÖ temperature: Temperature profiles
   ‚úÖ windSpeed: Wind speed at surface
   ‚úÖ windDirection: Wind direction
   ‚úÖ pressure: Atmospheric pressure
   ‚úÖ relativeHumidity: Humidity
   ‚úÖ dewpoint: Dew point temperature
   ‚úÖ skyCover: Sky cover/cloud cover
   ‚ùå precipitationProbability: Precipitation probability - NOT AVAILABLE
   ‚úÖ atmosphericDispersionIndex: Atmospheric stability indicator
   ‚úÖ mixingHeight: Mixing layer height
   ‚úÖ transportWindSpeed: Transport wind speed
   ‚úÖ transportWindDirection: Transport wind direction
   ‚ùå ventilationRate: Ventilation rate - NOT AVAILABLE

üéà STEP 3: Investigating upper-air data sources
==================================================

üéà Testing Radiosonde Station APIs (Upper-Air Data)
------------------------------------------------------------

üìç Testing Denver, CO (DNR)
   Station URL: https://api.weather.gov/stations/DNR
   ‚ùå Station DNR not found or no data

üìç Testing Grand Junction, CO (GJT)
   Station URL: https://api.weather.gov/stations/GJT
   ‚ùå Station GJT not found or no data

üìç Testing Albuquerque, NM (ABQ)
   Station URL: https://api.weather.gov/stations/ABQ
   ‚ùå Station ABQ not found or no data

üìç Testing Dodge City, KS (DDC)
   Station URL: https://api.weather.gov/stations/DDC
   ‚ùå Station DDC not found or no data

üå¨Ô∏è  Investigating NOAA Upper-Air Products
------------------------------------------------------------

üì° Testing: https://api.weather.gov/products/types
‚úÖ Status: 200
üîç Searching for upper-air product types...
‚ùå No upper-air product types found

üì° Testing: https://api.weather.gov/products
‚úÖ Status: 200

üì° Testing: https://api.weather.gov/glossary
‚úÖ Status: 200

üéØ NOAA MKI SYSTEM DATA AVAILABILITY ANALYSIS
======================================================================

üìä FACTOR-BY-FACTOR ANALYSIS (NOAA API):
--------------------------------------------------
1Ô∏è‚É£  Rain Probability (25% weight):
   Status: ‚ùå NOT AVAILABLE

2Ô∏è‚É£  Clear Sky Conditions (20% weight):
   Status: ‚úÖ AVAILABLE
   Source: NOAA gridData.skyCover

3Ô∏è‚É£  Pressure Change (20% weight):
   Status: ‚úÖ AVAILABLE
   Source: NOAA gridData.pressure
   Note: Time series data available for trend analysis

4Ô∏è‚É£  Temperature Difference (15% weight):
   Status: ‚úÖ AVAILABLE
   Source: NOAA gridData.temperature for both locations

5Ô∏è‚É£  Wave Pattern / Upper-Air Analysis (15% weight):
   Status: üü° PARTIALLY AVAILABLE
   Available data:
     ‚úÖ Transport wind speed/direction
     ‚úÖ Mixing layer height
   Missing for full Froude analysis:
     ‚ùå Multi-level wind profiles
     ‚ùå Brunt-V√§is√§l√§ frequency
     ‚ùå Direct mountain wave detection
   Potential: Calculate approximate Froude number from transport winds

6Ô∏è‚É£  Atmospheric Stability (5% weight):
   Status: üü° AVAILABLE (Stability Indices)
   Available data:
     ‚úÖ Atmospheric Dispersion Index
   Note: These are calculated stability indicators, not raw soundings

üî¨ ADVANCED NOAA CAPABILITIES ASSESSMENT:
--------------------------------------------------
   ‚úÖ mixingHeight: Available
   ‚úÖ transportWindSpeed: Available
   ‚úÖ transportWindDirection: Available
   ‚ùå ventilationRate: Not available
   ‚úÖ atmosphericDispersionIndex: Available

üìà ADVANCED DATA SCORE: 4/5 parameters available

üö® NOAA API FINDINGS:
========================================
‚úÖ NOAA provides MORE advanced meteorological data than OpenWeather
‚úÖ Mixing height and transport winds enable better wave analysis
‚úÖ Atmospheric dispersion indices provide stability information

üéØ RECOMMENDATION:
   NOAA API can support a legitimate 6-factor MKI system!
   Use NOAA as primary data source with OpenWeather as backup

üí° IMPLEMENTATION STRATEGY:
------------------------------
1. Use NOAA grid data for enhanced meteorological parameters
2. Fall back to OpenWeather for basic weather if NOAA fails
3. Calculate Froude approximations using NOAA transport winds
4. Use NOAA stability indices instead of full atmospheric soundings
5. Clearly label which factors use measured vs. calculated data

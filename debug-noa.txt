
> dp-soda@1.0.0 debug-noaa
> node scripts/debug-noaa-api.mjs

ğŸŒªï¸  NOAA WEATHER API INVESTIGATION FOR MKI SYSTEM
======================================================================
Purpose: Determine if NOAA can provide advanced meteorological data
         for legitimate 6-factor Mountain Wave-Katabatic Interaction analysis

ğŸ“ STEP 1: Getting NOAA grid points for both locations
==================================================
ğŸ¯ Testing NOAA Grid Point API for Morrison, CO (Valley - 1740m)
------------------------------------------------------------
ğŸ“¡ API Request:
   URL: https://api.weather.gov/points/39.6547,-105.1956
âœ… Response Status: 200
ğŸ“Š Grid Point Data:
{
  "@context": [
    "https://geojson.org/geojson-ld/geojson-context.jsonld",
    {
      "@version": "1.1",
      "wx": "https://api.weather.gov/ontology#",
      "s": "https://schema.org/",
      "geo": "http://www.opengis.net/ont/geosparql#",
      "unit": "http://codes.wmo.int/common/unit/",
      "@vocab": "https://api.weather.gov/ontology#",
      "geometry": {
        "@id": "s:GeoCoordinates",
        "@type": "geo:wktLiteral"
      },
      "city": "s:addressLocality",
      "state": "s:addressRegion",
      "distance": {
        "@id": "s:Distance",
        "@type": "s:QuantitativeValue"
      },
      "bearing": {
        "@type": "s:QuantitativeValue"
      },
      "value": {
        "@id": "s:value"
      },
      "unitCode": {
        "@id": "s:unitCode",
        "@type": "@id"
      },
      "forecastOffice": {
        "@type": "@id"
      },
      "forecastGridData": {
        "@type": "@id"
      },
      "publicZone": {
        "@type": "@id"
      },
      "county": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://api.weather.gov/points/39.6547,-105.1956",
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [
      -105.1956,
      39.6547
    ]
  },
  "properties": {
    "@id": "https://api.weather.gov/points/39.6547,-105.1956",
    "@type": "wx:Point",
    "cwa": "BOU",
    "forecastOffice": "https://api.weather.gov/offices/BOU",
    "gridId": "BOU",
    "gridX": 56,
    "gridY": 58,
    "forecast": "https://api.weather.gov/gridpoints/BOU/56,58/forecast",
    "forecastHourly": "https://api.weather.gov/gridpoints/BOU/56,58/forecast/hourly",
    "forecastGridData": "https://api.weather.gov/gridpoints/BOU/56,58",
    "observationStations": "https://api.weather.gov/gridpoints/BOU/56,58/stations",
    "relativeLocation": {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          -105.207919,
          39.625613
        ]
      },
      "properties": {
        "city": "Morrison",
        "state": "CO",
        "distance": {
          "unitCode": "wmoUnit:m",
          "value": 3401.9994330297
        },
        "bearing": {
          "unitCode": "wmoUnit:degree_(angle)",
          "value": 18
        }
      }
    },
    "forecastZone": "https://api.weather.gov/zones/forecast/COZ036",
    "county": "https://api.weather.gov/zones/county/COC059",
    "fireWeatherZone": "https://api.weather.gov/zones/fire/COZ216",
    "timeZone": "America/Denver",
    "radarStation": "KFTG"
  }
}

ğŸ·ï¸  GRID INFORMATION:
   Office: BOU
   Grid X: 56
   Grid Y: 58
   Forecast URL: https://api.weather.gov/gridpoints/BOU/56,58/forecast
   Hourly Forecast URL: https://api.weather.gov/gridpoints/BOU/56,58/forecast/hourly
   Forecast Grid Data URL: https://api.weather.gov/gridpoints/BOU/56,58
ğŸ¯ Testing NOAA Grid Point API for Nederland, CO (Mountain - 2540m)
------------------------------------------------------------
ğŸ“¡ API Request:
   URL: https://api.weather.gov/points/40.0142,-105.5108
âœ… Response Status: 200
ğŸ“Š Grid Point Data:
{
  "@context": [
    "https://geojson.org/geojson-ld/geojson-context.jsonld",
    {
      "@version": "1.1",
      "wx": "https://api.weather.gov/ontology#",
      "s": "https://schema.org/",
      "geo": "http://www.opengis.net/ont/geosparql#",
      "unit": "http://codes.wmo.int/common/unit/",
      "@vocab": "https://api.weather.gov/ontology#",
      "geometry": {
        "@id": "s:GeoCoordinates",
        "@type": "geo:wktLiteral"
      },
      "city": "s:addressLocality",
      "state": "s:addressRegion",
      "distance": {
        "@id": "s:Distance",
        "@type": "s:QuantitativeValue"
      },
      "bearing": {
        "@type": "s:QuantitativeValue"
      },
      "value": {
        "@id": "s:value"
      },
      "unitCode": {
        "@id": "s:unitCode",
        "@type": "@id"
      },
      "forecastOffice": {
        "@type": "@id"
      },
      "forecastGridData": {
        "@type": "@id"
      },
      "publicZone": {
        "@type": "@id"
      },
      "county": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://api.weather.gov/points/40.0142,-105.5108",
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [
      -105.5108,
      40.0142
    ]
  },
  "properties": {
    "@id": "https://api.weather.gov/points/40.0142,-105.5108",
    "@type": "wx:Point",
    "cwa": "BOU",
    "forecastOffice": "https://api.weather.gov/offices/BOU",
    "gridId": "BOU",
    "gridX": 46,
    "gridY": 75,
    "forecast": "https://api.weather.gov/gridpoints/BOU/46,75/forecast",
    "forecastHourly": "https://api.weather.gov/gridpoints/BOU/46,75/forecast/hourly",
    "forecastGridData": "https://api.weather.gov/gridpoints/BOU/46,75",
    "observationStations": "https://api.weather.gov/gridpoints/BOU/46,75/stations",
    "relativeLocation": {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          -105.479577,
          39.97689
        ]
      },
      "properties": {
        "city": "Bonanza Mountain Estates",
        "state": "CO",
        "distance": {
          "unitCode": "wmoUnit:m",
          "value": 4928.0768438327
        },
        "bearing": {
          "unitCode": "wmoUnit:degree_(angle)",
          "value": 327
        }
      }
    },
    "forecastZone": "https://api.weather.gov/zones/forecast/COZ035",
    "county": "https://api.weather.gov/zones/county/COC013",
    "fireWeatherZone": "https://api.weather.gov/zones/fire/COZ215",
    "timeZone": "America/Denver",
    "radarStation": "KFTG"
  }
}

ğŸ·ï¸  GRID INFORMATION:
   Office: BOU
   Grid X: 46
   Grid Y: 75
   Forecast URL: https://api.weather.gov/gridpoints/BOU/46,75/forecast
   Hourly Forecast URL: https://api.weather.gov/gridpoints/BOU/46,75/forecast/hourly
   Forecast Grid Data URL: https://api.weather.gov/gridpoints/BOU/46,75

ğŸ“Š STEP 2: Analyzing detailed grid data
==================================================

ğŸŒ¡ï¸  Testing NOAA Grid Data API for Morrison, CO (Valley - 1740m)
------------------------------------------------------------
âœ… Response Status: 200
ğŸ“Š Available Grid Data Parameters:
   â€¢ @id: string
   â€¢ @type: string
   â€¢ updateTime: string
   â€¢ validTimes: string
   âœ… elevation: Available
   â€¢ forecastOffice: string
   â€¢ gridId: string
   â€¢ gridX: number
   â€¢ gridY: number
   âœ… temperature: Available
      Sample: 17.77777777777778 wmoUnit:degC
   âœ… dewpoint: Available
   âœ… maxTemperature: Available
   âœ… minTemperature: Available
   âœ… relativeHumidity: Available
      Sample: 46 wmoUnit:percent
   âœ… apparentTemperature: Available
   âœ… wetBulbGlobeTemperature: Available
   âœ… heatIndex: Available
   âœ… windChill: Available
   âœ… skyCover: Available
   âœ… windDirection: Available
      Sample: 260 wmoUnit:degree_(angle)
   âœ… windSpeed: Available
      Sample: 14.816 wmoUnit:km_h-1
   âœ… windGust: Available
   âœ… weather: Available
   âœ… hazards: Available
   âœ… probabilityOfPrecipitation: Available
   âœ… quantitativePrecipitation: Available
   âœ… iceAccumulation: Available
   âœ… snowfallAmount: Available
   âœ… snowLevel: Available
   âœ… ceilingHeight: Available
   âœ… visibility: Available
   âœ… transportWindSpeed: Available
   âœ… transportWindDirection: Available
   âœ… mixingHeight: Available
   âœ… hainesIndex: Available
   âœ… lightningActivityLevel: Available
   âœ… twentyFootWindSpeed: Available
   âœ… twentyFootWindDirection: Available
   âœ… waveHeight: Available
   âœ… wavePeriod: Available
   âœ… waveDirection: Available
   âœ… primarySwellHeight: Available
   âœ… primarySwellDirection: Available
   âœ… secondarySwellHeight: Available
   âœ… secondarySwellDirection: Available
   âœ… wavePeriod2: Available
   âœ… windWaveHeight: Available
   âœ… dispersionIndex: Available
   âœ… pressure: Available
   âœ… probabilityOfTropicalStormWinds: Available
   âœ… probabilityOfHurricaneWinds: Available
   âœ… potentialOf15mphWinds: Available
   âœ… potentialOf25mphWinds: Available
   âœ… potentialOf35mphWinds: Available
   âœ… potentialOf45mphWinds: Available
   âœ… potentialOf20mphWindGusts: Available
   âœ… potentialOf30mphWindGusts: Available
   âœ… potentialOf40mphWindGusts: Available
   âœ… potentialOf50mphWindGusts: Available
   âœ… potentialOf60mphWindGusts: Available
   âœ… grasslandFireDangerIndex: Available
   âœ… probabilityOfThunder: Available
   âœ… davisStabilityIndex: Available
   âœ… atmosphericDispersionIndex: Available
   âœ… lowVisibilityOccurrenceRiskIndex: Available
   âœ… stability: Available
   âœ… redFlagThreatIndex: Available

ğŸ¯ MKI-RELEVANT PARAMETERS:
------------------------------
   âœ… temperature: Temperature profiles
   âœ… windSpeed: Wind speed at surface
   âœ… windDirection: Wind direction
   âœ… pressure: Atmospheric pressure
   âœ… relativeHumidity: Humidity
   âœ… dewpoint: Dew point temperature
   âœ… skyCover: Sky cover/cloud cover
   âŒ precipitationProbability: Precipitation probability - NOT AVAILABLE
   âœ… atmosphericDispersionIndex: Atmospheric stability indicator
   âœ… mixingHeight: Mixing layer height
   âœ… transportWindSpeed: Transport wind speed
   âœ… transportWindDirection: Transport wind direction
   âŒ ventilationRate: Ventilation rate - NOT AVAILABLE

ğŸŒ¡ï¸  Testing NOAA Grid Data API for Nederland, CO (Mountain - 2540m)
------------------------------------------------------------
âœ… Response Status: 200
ğŸ“Š Available Grid Data Parameters:
   â€¢ @id: string
   â€¢ @type: string
   â€¢ updateTime: string
   â€¢ validTimes: string
   âœ… elevation: Available
   â€¢ forecastOffice: string
   â€¢ gridId: string
   â€¢ gridX: number
   â€¢ gridY: number
   âœ… temperature: Available
      Sample: 11.666666666666666 wmoUnit:degC
   âœ… dewpoint: Available
   âœ… maxTemperature: Available
   âœ… minTemperature: Available
   âœ… relativeHumidity: Available
      Sample: 50 wmoUnit:percent
   âœ… apparentTemperature: Available
   âœ… wetBulbGlobeTemperature: Available
   âœ… heatIndex: Available
   âœ… windChill: Available
   âœ… skyCover: Available
   âœ… windDirection: Available
      Sample: 270 wmoUnit:degree_(angle)
   âœ… windSpeed: Available
      Sample: 16.668 wmoUnit:km_h-1
   âœ… windGust: Available
   âœ… weather: Available
   âœ… hazards: Available
   âœ… probabilityOfPrecipitation: Available
   âœ… quantitativePrecipitation: Available
   âœ… iceAccumulation: Available
   âœ… snowfallAmount: Available
   âœ… snowLevel: Available
   âœ… ceilingHeight: Available
   âœ… visibility: Available
   âœ… transportWindSpeed: Available
   âœ… transportWindDirection: Available
   âœ… mixingHeight: Available
   âœ… hainesIndex: Available
   âœ… lightningActivityLevel: Available
   âœ… twentyFootWindSpeed: Available
   âœ… twentyFootWindDirection: Available
   âœ… waveHeight: Available
   âœ… wavePeriod: Available
   âœ… waveDirection: Available
   âœ… primarySwellHeight: Available
   âœ… primarySwellDirection: Available
   âœ… secondarySwellHeight: Available
   âœ… secondarySwellDirection: Available
   âœ… wavePeriod2: Available
   âœ… windWaveHeight: Available
   âœ… dispersionIndex: Available
   âœ… pressure: Available
   âœ… probabilityOfTropicalStormWinds: Available
   âœ… probabilityOfHurricaneWinds: Available
   âœ… potentialOf15mphWinds: Available
   âœ… potentialOf25mphWinds: Available
   âœ… potentialOf35mphWinds: Available
   âœ… potentialOf45mphWinds: Available
   âœ… potentialOf20mphWindGusts: Available
   âœ… potentialOf30mphWindGusts: Available
   âœ… potentialOf40mphWindGusts: Available
   âœ… potentialOf50mphWindGusts: Available
   âœ… potentialOf60mphWindGusts: Available
   âœ… grasslandFireDangerIndex: Available
   âœ… probabilityOfThunder: Available
   âœ… davisStabilityIndex: Available
   âœ… atmosphericDispersionIndex: Available
   âœ… lowVisibilityOccurrenceRiskIndex: Available
   âœ… stability: Available
   âœ… redFlagThreatIndex: Available

ğŸ¯ MKI-RELEVANT PARAMETERS:
------------------------------
   âœ… temperature: Temperature profiles
   âœ… windSpeed: Wind speed at surface
   âœ… windDirection: Wind direction
   âœ… pressure: Atmospheric pressure
   âœ… relativeHumidity: Humidity
   âœ… dewpoint: Dew point temperature
   âœ… skyCover: Sky cover/cloud cover
   âŒ precipitationProbability: Precipitation probability - NOT AVAILABLE
   âœ… atmosphericDispersionIndex: Atmospheric stability indicator
   âœ… mixingHeight: Mixing layer height
   âœ… transportWindSpeed: Transport wind speed
   âœ… transportWindDirection: Transport wind direction
   âŒ ventilationRate: Ventilation rate - NOT AVAILABLE

ğŸˆ STEP 3: Investigating upper-air data sources
==================================================

ğŸˆ Testing Radiosonde Station APIs (Upper-Air Data)
------------------------------------------------------------

ğŸ“ Testing Denver, CO (DNR)
   Station URL: https://api.weather.gov/stations/DNR
   âŒ Station DNR not found or no data

ğŸ“ Testing Grand Junction, CO (GJT)
   Station URL: https://api.weather.gov/stations/GJT
   âŒ Station GJT not found or no data

ğŸ“ Testing Albuquerque, NM (ABQ)
   Station URL: https://api.weather.gov/stations/ABQ
   âŒ Station ABQ not found or no data

ğŸ“ Testing Dodge City, KS (DDC)
   Station URL: https://api.weather.gov/stations/DDC
   âŒ Station DDC not found or no data

ğŸŒ¬ï¸  Investigating NOAA Upper-Air Products
------------------------------------------------------------

ğŸ“¡ Testing: https://api.weather.gov/products/types
âœ… Status: 200
ğŸ” Searching for upper-air product types...
âŒ No upper-air product types found

ğŸ“¡ Testing: https://api.weather.gov/products
âœ… Status: 200

ğŸ“¡ Testing: https://api.weather.gov/glossary
âœ… Status: 200

ğŸ¯ NOAA MKI SYSTEM DATA AVAILABILITY ANALYSIS
======================================================================

ğŸ“Š FACTOR-BY-FACTOR ANALYSIS (NOAA API):
--------------------------------------------------
1ï¸âƒ£  Rain Probability (25% weight):
   Status: âŒ NOT AVAILABLE

2ï¸âƒ£  Clear Sky Conditions (20% weight):
   Status: âœ… AVAILABLE
   Source: NOAA gridData.skyCover

3ï¸âƒ£  Pressure Change (20% weight):
   Status: âœ… AVAILABLE
   Source: NOAA gridData.pressure
   Note: Time series data available for trend analysis

4ï¸âƒ£  Temperature Difference (15% weight):
   Status: âœ… AVAILABLE
   Source: NOAA gridData.temperature for both locations

5ï¸âƒ£  Wave Pattern / Upper-Air Analysis (15% weight):
   Status: ğŸŸ¡ PARTIALLY AVAILABLE
   Available data:
     âœ… Transport wind speed/direction
     âœ… Mixing layer height
   Missing for full Froude analysis:
     âŒ Multi-level wind profiles
     âŒ Brunt-VÃ¤isÃ¤lÃ¤ frequency
     âŒ Direct mountain wave detection
   Potential: Calculate approximate Froude number from transport winds

6ï¸âƒ£  Atmospheric Stability (5% weight):
   Status: ğŸŸ¡ AVAILABLE (Stability Indices)
   Available data:
     âœ… Atmospheric Dispersion Index
   Note: These are calculated stability indicators, not raw soundings

ğŸ”¬ ADVANCED NOAA CAPABILITIES ASSESSMENT:
--------------------------------------------------
   âœ… mixingHeight: Available
   âœ… transportWindSpeed: Available
   âœ… transportWindDirection: Available
   âŒ ventilationRate: Not available
   âœ… atmosphericDispersionIndex: Available

ğŸ“ˆ ADVANCED DATA SCORE: 4/5 parameters available

ğŸš¨ NOAA API FINDINGS:
========================================
âœ… NOAA provides MORE advanced meteorological data than OpenWeather
âœ… Mixing height and transport winds enable better wave analysis
âœ… Atmospheric dispersion indices provide stability information

ğŸ¯ RECOMMENDATION:
   NOAA API can support a legitimate 6-factor MKI system!
   Use NOAA as primary data source with OpenWeather as backup

ğŸ’¡ IMPLEMENTATION STRATEGY:
------------------------------
1. Use NOAA grid data for enhanced meteorological parameters
2. Fall back to OpenWeather for basic weather if NOAA fails
3. Calculate Froude approximations using NOAA transport winds
4. Use NOAA stability indices instead of full atmospheric soundings
5. Clearly label which factors use measured vs. calculated data
